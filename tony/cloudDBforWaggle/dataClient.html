
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><title>Python: module dataClient</title>
</head><body bgcolor="#f0f0f8">

<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="heading">
<tr bgcolor="#7799ee">
<td valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial">&nbsp;<br><big><big><strong>dataClient</strong></big></big></font></td
><td align=right valign=bottom
><font color="#ffffff" face="helvetica, arial"><a href=".">index</a><br><a href="file:/Users/tony/Dropbox/workspace_sync/ANL_14/cerisc-internal-code/branches/2014/tony/cloudDBforWaggle/dataClient.py">/Users/tony/Dropbox/workspace_sync/ANL_14/cerisc-internal-code/branches/2014/tony/cloudDBforWaggle/dataClient.py</a></font></td></tr></table>
    <p></p>
<p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#aa55cc">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Modules</strong></big></font></td></tr>
    
<tr><td bgcolor="#aa55cc"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><table width="100%" summary="list"><tr><td width="25%" valign=top><a href="commands.html">commands</a><br>
<a href="fcntl.html">fcntl</a><br>
</td><td width="25%" valign=top><a href="logging.html">logging</a><br>
<a href="os.html">os</a><br>
</td><td width="25%" valign=top><a href="pika.html">pika</a><br>
<a href="socket.html">socket</a><br>
</td><td width="25%" valign=top><a href="struct.html">struct</a><br>
<a href="time.html">time</a><br>
</td></tr></table></td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ee77aa">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Classes</strong></big></font></td></tr>
    
<tr><td bgcolor="#ee77aa"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><dl>
<dt><font face="helvetica, arial"><a href="dataClient.html#NodeDataClient">NodeDataClient</a>
</font></dt></dl>
 <p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ffc8d8">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#000000" face="helvetica, arial"><a name="NodeDataClient">class <strong>NodeDataClient</strong></a></font></td></tr>
    
<tr><td bgcolor="#ffc8d8"><tt>&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%">Methods defined here:<br>
<dl><dt><a name="NodeDataClient-__init__"><strong>__init__</strong></a>(self, ip, port, user, passwd, exch, rout_key)</dt><dd><tt>Initializer&nbsp;of&nbsp;data&nbsp;client,&nbsp;all&nbsp;parameters&nbsp;needed&nbsp;to&nbsp;be&nbsp;filled&nbsp;so&nbsp;to&nbsp;access&nbsp;the&nbsp;remote&nbsp;server.&nbsp;Please&nbsp;see&nbsp;example&nbsp;at&nbsp;the&nbsp;bottom&nbsp;for&nbsp;use.</tt></dd></dl>

<dl><dt><a name="NodeDataClient-blob_send"><strong>blob_send</strong></a>(self, blobSrc, blobDest, successMsg, failMsg)</dt></dl>

<dl><dt><a name="NodeDataClient-close"><strong>close</strong></a>(self)</dt><dd><tt>Close&nbsp;connection.&nbsp;Call&nbsp;this&nbsp;after&nbsp;you&nbsp;finish&nbsp;use&nbsp;client&nbsp;to&nbsp;save&nbsp;server&nbsp;side&nbsp;resource.<br>
You&nbsp;need&nbsp;to&nbsp;recreate&nbsp;the&nbsp;DataClient&nbsp;object&nbsp;to&nbsp;send&nbsp;data&nbsp;if&nbsp;you&nbsp;called&nbsp;this,&nbsp;so&nbsp;put&nbsp;this&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;your&nbsp;logic&nbsp;session.<br>
&nbsp;<br>
Note:&nbsp;you&nbsp;may&nbsp;get&nbsp;warning&nbsp;like&nbsp;this:<br>
WARNING:pika.adapters.base_connection:Unknown&nbsp;state&nbsp;on&nbsp;disconnect:&nbsp;0<br>
This&nbsp;is&nbsp;due&nbsp;to&nbsp;a&nbsp;known&nbsp;pika&nbsp;bug,&nbsp;the&nbsp;warning&nbsp;is&nbsp;printed&nbsp;when&nbsp;connection.<a href="#NodeDataClient-close">close</a>()&nbsp;is&nbsp;called,&nbsp;but&nbsp;won't&nbsp;affect&nbsp;the&nbsp;behavior&nbsp;of&nbsp;the&nbsp;program.</tt></dd></dl>

<dl><dt><a name="NodeDataClient-msg_send"><strong>msg_send</strong></a>(self, msg)</dt><dd><tt>Send&nbsp;a&nbsp;string&nbsp;to&nbsp;remote&nbsp;RMQ&nbsp;server,&nbsp;msg&nbsp;has&nbsp;to&nbsp;be&nbsp;a&nbsp;string<br>
Please&nbsp;see&nbsp;example&nbsp;at&nbsp;the&nbsp;bottom&nbsp;for&nbsp;use.</tt></dd></dl>

<dl><dt><a name="NodeDataClient-multi_send"><strong>multi_send</strong></a>(self, msgArray)</dt><dd><tt>Same&nbsp;as&nbsp;msg_send,&nbsp;but&nbsp;accept&nbsp;an&nbsp;array&nbsp;of&nbsp;msg&nbsp;and&nbsp;send.<br>
Parameters<br>
----------<br>
msgArray:&nbsp;array&nbsp;of&nbsp;str<br>
&nbsp;&nbsp;&nbsp;&nbsp;Messages&nbsp;that&nbsp;will&nbsp;be&nbsp;sent<br>
Please&nbsp;see&nbsp;example&nbsp;at&nbsp;the&nbsp;bottom&nbsp;for&nbsp;use.</tt></dd></dl>

<hr>
Static methods defined here:<br>
<dl><dt><a name="NodeDataClient-msg_gen"><strong>msg_gen</strong></a>(instID, sensorID, readTime, paramName, paramType, paramVal, paramUnit, paramNote)</dt><dd><tt>This&nbsp;function&nbsp;takes&nbsp;data&nbsp;input&nbsp;and&nbsp;generate&nbsp;a&nbsp;string&nbsp;message&nbsp;for&nbsp;transferring.&nbsp;Note&nbsp;that&nbsp;this&nbsp;function&nbsp;generates&nbsp;msg&nbsp;for&nbsp;ONE&nbsp;reading&nbsp;from&nbsp;ONE&nbsp;sensor,&nbsp;while&nbsp;the&nbsp;sensor&nbsp;can&nbsp;have&nbsp;multiple&nbsp;values.<br>
Parameters<br>
----------<br>
instID:&nbsp;str<br>
&nbsp;&nbsp;&nbsp;&nbsp;Instance&nbsp;ID<br>
readTime:&nbsp;str<br>
&nbsp;&nbsp;&nbsp;&nbsp;time&nbsp;stamp&nbsp;of&nbsp;reading,&nbsp;please&nbsp;use&nbsp;time.time()&nbsp;for&nbsp;it.<br>
paramName:&nbsp;array&nbsp;of&nbsp;str<br>
&nbsp;&nbsp;&nbsp;&nbsp;defined&nbsp;as&nbsp;paramName[],&nbsp;name&nbsp;list&nbsp;ofdata&nbsp;items&nbsp;in&nbsp;the&nbsp;data&nbsp;body.&nbsp;eg:&nbsp;paramName[2]&nbsp;=&nbsp;'Temperature'<br>
paramType:&nbsp;array&nbsp;of&nbsp;str<br>
&nbsp;&nbsp;&nbsp;&nbsp;defined&nbsp;as&nbsp;dataItemTypeList[],&nbsp;type&nbsp;list&nbsp;of&nbsp;the&nbsp;data&nbsp;body.&nbsp;eg:&nbsp;(string,&nbsp;int,&nbsp;float,&nbsp;raw_data_in_blob,&nbsp;image_blob)&nbsp;should&nbsp;be&nbsp;presented&nbsp;as&nbsp;typeList&nbsp;=&nbsp;['s','i','f','R','I'],&nbsp;all&nbsp;blob&nbsp;data&nbsp;should&nbsp;use&nbsp;CAPS.&nbsp;We&nbsp;can&nbsp;define&nbsp;a&nbsp;dictionary&nbsp;of&nbsp;this&nbsp;later.&nbsp;eg:&nbsp;paramType[2]&nbsp;=&nbsp;'i'&nbsp;for&nbsp;int.&nbsp;<br>
paramVal:&nbsp;array&nbsp;of&nbsp;str<br>
&nbsp;&nbsp;&nbsp;&nbsp;data&nbsp;values;&nbsp;eg:&nbsp;paramVal[2]&nbsp;=&nbsp;'102'<br>
paramUnit:&nbsp;array&nbsp;of&nbsp;str<br>
&nbsp;&nbsp;&nbsp;&nbsp;units&nbsp;for&nbsp;data&nbsp;items.&nbsp;eg:&nbsp;paramUnit[2]&nbsp;=&nbsp;'F'&nbsp;&nbsp;<br>
paramNote:&nbsp;array&nbsp;of&nbsp;str<br>
&nbsp;&nbsp;&nbsp;&nbsp;any&nbsp;extra&nbsp;information&nbsp;for&nbsp;the&nbsp;particular&nbsp;data&nbsp;item<br>
&nbsp;<br>
Please&nbsp;see&nbsp;example&nbsp;at&nbsp;the&nbsp;bottom&nbsp;for&nbsp;use.</tt></dd></dl>

</td></tr></table></td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#55aa55">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Data</strong></big></font></td></tr>
    
<tr><td bgcolor="#55aa55"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><strong>DELIMITERS</strong> = [' [0] ', ' [1] ', ' [2] ', ' [3] ', ' [4] ', ' [5] ']<br>
<strong>RMQ_exchange</strong> = ''<br>
<strong>RMQ_ip</strong> = '149.165.149.14'<br>
<strong>RMQ_passwd</strong> = 'Ruza3que'<br>
<strong>RMQ_port</strong> = 5672<br>
<strong>RMQ_routing_key</strong> = 'hello'<br>
<strong>RMQ_user</strong> = 'clients'<br>
<strong>data</strong> = ['data1', 'data2', 'data3', 'data4']<br>
<strong>dataClient</strong> = &lt;dataClient.NodeDataClient instance&gt;<br>
<strong>msg</strong> = '130.202.135.146 [2] instance-123 [2] sensor-456 ...nit4 [2]  [3] note1 [3] note2 [3] note3 [3] note4'<br>
<strong>msgArray</strong> = ['130.202.135.146 [2] instance-123 [2] sensor-456 ...nit4 [2]  [3] note1 [3] note2 [3] note3 [3] note4', '130.202.135.146 [2] instance-123 [2] sensor-456 ...nit4 [2]  [3] note1 [3] note2 [3] note3 [3] note4']<br>
<strong>names</strong> = ['name1', 'name2', 'name3', 'name4']<br>
<strong>note</strong> = ['note1', 'note2', 'note3', 'note4']<br>
<strong>types</strong> = ['type1', 'type2', 'type3', 'type4']<br>
<strong>unit</strong> = ['unit1', 'unit2', 'unit3', 'unit4']</td></tr></table>
</body></html>